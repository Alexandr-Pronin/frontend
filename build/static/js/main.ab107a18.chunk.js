(this["webpackJsonpweb-frontend"]=this["webpackJsonpweb-frontend"]||[]).push([[0],{473:function(e,t,a){e.exports=a(675)},675:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(20),i=a(7),o=a(10),c=function(){function e(){Object(i.a)(this,e),this.listeners={}}return Object(o.a)(e,[{key:"on",value:function(e,t){return e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t),this}},{key:"emit",value:function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];return e in this.listeners&&this.listeners[e].forEach((function(e){e.apply(null,a)})),this}}],[{key:"instance",get:function(){return e._instance}}]),e}();c._instance=new c;var s=a(459),u=function e(){Object(i.a)(this,e),this.completed=[],this.templates=[],this.labels=[]},d=function(){function e(){Object(i.a)(this,e),this.devices=[],this.workees=[],this.email="",this.unternehmen="",this.vorname="",this.nachname="",this.protocols=new u}return Object(o.a)(e,[{key:"name",get:function(){return"".concat(this.vorname," ").concat(this.nachname)}}]),e}(),h=function e(){var t=this;Object(i.a)(this,e),this.user=new d,this.setVorname=function(e){return t.user.vorname=e,t},this.setNachname=function(e){return t.user.nachname=e,t},this.setEmail=function(e){return t.user.email=e,t},this.setUnternehmen=function(e){return t.user.unternehmen=e,t},this.setDevices=function(e){return t.user.devices=e,t},this.setWorkees=function(e){return t.user.workees=e,t},this.build=function(){return t.user}},p=function e(){Object(i.a)(this,e)};p.user=new d,p.cookies=new s.a,p.appName="DataBuddy",p.config=new function e(){Object(i.a)(this,e),this.fadeInDuration=0,this.fadeInDelay=0},p.update=function(){c.instance.emit("updateApp")};var m=a(110),f=a(455),g=a(456),b=a(14),E=a(13),v=a(306),y=a(37),C=a(99),k=a(733),O=a(705),w=a(706),S=a(378),j=a(71),T=a(368),x=a(369),D=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{style:this.props.style?this.props.style:{}},r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement("div",{style:{position:"relative"}},r.a.createElement(T.a,{variant:"contained",color:"primary",disabled:this.props.loading,onClick:this.props.onClick},this.props.children),this.props.loading&&r.a.createElement(x.a,{size:24,style:{color:"primary",position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}))))}}]),a}(r.a.Component),A=a(732),P=a(21),N=a.n(P),V=function(){function e(){var t=this;Object(i.a)(this,e),this.baseURL=function(a){return e._BASEURL=a,t},this.timeout=function(a){return e._TIMEOUT=a,t}}return Object(o.a)(e,null,[{key:"baseurl",get:function(){return e._BASEURL}},{key:"path",get:function(){return e._APIPATH}}]),e}();V._TIMEOUT=1e3,V._BASEURL="",V._APIPATH=new function e(){Object(i.a)(this,e),this.checkSession="/checksession",this.login="/login"},V.config=function(){return new V},V.extractErrorText=function(e){return e.response?e.response.status:e.request?"No Response":e.message},V.buildWithSessionKey=function(e,t,a,n){return{url:e,method:t,baseURL:V.baseurl,headers:{session_key:F.getSessionKey()},params:a||{},data:n||{},timeout:V._TIMEOUT}},V.buildBasicAuthRequest=function(e,t){return{url:V.path.login,method:"get",baseURL:V.baseurl,headers:{},params:{},auth:{username:e,password:t},timeout:V._TIMEOUT}};var F=function(){function e(){Object(i.a)(this,e)}return Object(o.a)(e,null,[{key:"isLoggedIn",value:function(){return!!p.cookies.get("session_key")}},{key:"logout",value:function(){p.cookies.remove("session_key",{path:e._SESSION_COOKIE_PATH}),c.instance.emit("updateApp")}},{key:"getSessionKey",value:function(){var t=p.cookies.get(e._SESSION_COOKIE_NAME);return t||""}},{key:"checkSession",value:function(){return new Promise((function(t,a){if(e.isLoggedIn()){var n=V.buildWithSessionKey(V.path.checkSession,"GET");N()(n).then((function(n){200!==n.status?(e.logout(),a("any")):t()}),(function(t){e.logout(),a("Session probably expired")}))}else a("Cookie not set")}))}},{key:"mock",value:function(t){p.cookies.set(e._SESSION_COOKIE_NAME,t,{path:e._SESSION_COOKIE_PATH})}}]),e}();F._SESSION_COOKIE_PATH="/",F._SESSION_COOKIE_NAME="session_key",F.attempt=function(e,t){return new Promise((function(a,n){var r=V.buildBasicAuthRequest(e,t);N()(r).then((function(e){200===e.status?(p.cookies.set(F._SESSION_COOKIE_NAME,e.data.session_key,{path:F._SESSION_COOKIE_PATH}),p.user=(new h).setVorname(e.data.user.firstname).setNachname(e.data.user.lastname).setUnternehmen("Leipziger Verkehrsbetriebe").setEmail(e.data.user.email).build(),a()):n()}),(function(e){var t="";t=void 0!==e.response&&void 0!==e.response.status?401===e.response.status?"Nutzername oder Passwort falsch.":"Es ist ein Fehler aufgetreten.":"Verbindungsfehler",F.logout(),n(t)}))}))};var z=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={loading:!1,email:"",password:"",error:""},e.attemptLogin=function(){e.setState({loading:!0,error:""}),F.attempt(e.state.email,e.state.password).then((function(e){c.instance.emit("updateApp")})).catch((function(t){e.setState({error:t})})).finally((function(){return e.setState({loading:!1})}))},e.handleChangeEmail=function(t){e.setState({email:t.target.value})},e.handleChangePassword=function(t){e.setState({password:t.target.value})},e}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"main-background"},r.a.createElement("div",{className:"login-container"},r.a.createElement(C.a,{square:!0,className:"login"},r.a.createElement(k.a,{value:0,onChange:function(){},variant:"fullWidth",indicatorColor:"secondary",textColor:"secondary","aria-label":"icon label login register tabs"},r.a.createElement(O.a,{icon:r.a.createElement(j.a,{icon:"paper-plane"}),label:"LOGIN"})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(w.a,null,this.state.error.length>0&&r.a.createElement(A.a,{severity:"warning"},this.state.error),r.a.createElement("br",null),r.a.createElement(S.a,{label:"E-Mail Adresse",fullWidth:!0,onChange:this.handleChangeEmail.bind(this)}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(S.a,{type:"password",label:"Passwort",fullWidth:!0,onChange:this.handleChangePassword.bind(this)}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(D,{style:{float:"right"},onClick:this.attemptLogin.bind(this),loading:this.state.loading},"Einloggen"),r.a.createElement("br",null),r.a.createElement("br",null)))))}}]),a}(r.a.Component),M=a(458),L=a(460),I=a(80),_=a(293),W=a(380),R=a(708),B=a(734),U=a(5),K=a(379);Object(U.a)((function(e){return Object(K.a)({badge:{backgroundColor:"#44b700",color:"#44b700",boxShadow:"0 0 0 2px ".concat(e.palette.background.paper),"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"$ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}})}))(R.a);Object(U.a)((function(e){return Object(K.a)({root:{width:22,height:22,border:"2px solid ".concat(e.palette.background.paper)}})}))(B.a);var G=Object(W.a)((function(e){return Object(K.a)({root:{display:"flex","& > *":{margin:e.spacing(1)}},largeavatar:{height:e.spacing(7),width:e.spacing(7),border:"1px dotted black"}})}));function Z(e){var t=G();return r.a.createElement("div",{className:t.root},r.a.createElement(R.a,{overlap:"circle",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:r.a.createElement(j.a,{icon:e.icon})},r.a.createElement(B.a,{className:t.largeavatar,alt:e.name,src:e.avatar})))}var H=a(709),J=a(683),q=a(687),Q=a(710),Y=a(381),$=a(436),X=a(711),ee=a(229),te=a(441),ae=a.n(te),ne=a(440),re=a.n(ne),le=a(234),ie=a.n(le),oe=a(442),ce=a.n(oe),se=a(235),ue=a.n(se),de=function e(){Object(i.a)(this,e),this.name="",this.id=0},he=function e(){var t=this;Object(i.a)(this,e),this.workee=new de,this.setName=function(e){return t.workee.name=e,t},this.setId=function(e){return t.workee.id=e,t},this.build=function(){return t.workee}},pe=a(105),me=a.n(pe),fe=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={addworkee:"",error:""},e.handleDeleteWorkee=function(t){var a=p.user.workees.indexOf(t);if(-1!==a){var n=V.buildWithSessionKey("/workees/".concat(t.id),"DELETE");N()(n).then((function(){p.user.workees.splice(a,1)})).catch((function(){e.setState({error:"Beim l\xf6schen des Mitarbeiters ist ein Fehler aufgetreten."})})).finally((function(){p.update()}))}},e.handleAddWorkee=function(){var t=e.state.addworkee.trim();if(0!==t.length)if(p.user.workees.find((function(e){return e.name===t})))e.setState({error:"Es existiert bereits ein Mitarbeiter mit diesem Namen."});else{var a=V.buildWithSessionKey("/workees","POST",{},{name:t});N()(a).then((function(e){p.user.workees.push((new he).setName(t).setId(e.data.id).build())})).catch((function(t){e.setState({error:"Beim anlegen des Mitarbeiters ist ein Fehler aufgetreten."})})).finally((function(){e.setState({addworkee:""}),p.update()}))}else e.setState({error:"Geben Sie zuerst den Namen des Mitarbeiters an."})},e.handleAddWorkeeChange=function(t){e.setState({addworkee:t.target.value})},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=V.buildWithSessionKey("/workees","GET");N()(t).then((function(e){p.user.workees=[],e.data.forEach((function(e){p.user.workees.push((new he).setName(e.name).setId(e.id).build())}))})).catch((function(t){e.setState({error:"Beim abrufen der Mitarbeiter ist ein Fehler aufgetreten."})})).finally((function(){p.update()}))}},{key:"render",value:function(){var e=this;return r.a.createElement(me.a,{delay:p.config.fadeInDelay,transitionDuration:p.config.fadeInDuration},r.a.createElement(C.a,{className:"padding margin-top"},r.a.createElement(H.a,{open:this.state.error.length>0,autoHideDuration:5e3,onClose:function(t,a){"clickaway"!==a&&e.setState({error:""})}},r.a.createElement(A.a,{severity:"warning"},this.state.error)),r.a.createElement("h6",{className:"MuiTypography-root MuiTypography-h6",style:{lineHeight:"3rem"}},r.a.createElement(R.a,null,r.a.createElement(B.a,{style:{border:"1px dotted black",marginRight:"0.5rem"},alt:p.user.name,src:"/img/avatar/1.jpg"}),p.user.unternehmen)),r.a.createElement(J.a,{dense:!0},r.a.createElement(q.a,null,r.a.createElement(Q.a,null,r.a.createElement(re.a,null)),r.a.createElement(Y.a,{primary:p.user.name})),r.a.createElement(q.a,null,r.a.createElement(Q.a,null,r.a.createElement(ae.a,null)),r.a.createElement(Y.a,{primary:p.user.email})))),r.a.createElement(C.a,{className:"margin-top padding"},r.a.createElement("h6",{className:"MuiTypography-root MuiTypography-h6",style:{lineHeight:"3rem"}},"Mitarbeiter"),0===p.user.workees.length?r.a.createElement(I.a,{color:"textSecondary"},"F\xfcgen Sie Mitarbeiter hinzu."):p.user.workees.map((function(t){return r.a.createElement($.a,{key:"workee-".concat(t.id),icon:r.a.createElement(ie.a,null),label:t.name,onDelete:e.handleDeleteWorkee.bind(e,t),color:"secondary",variant:"outlined",style:{marginBottom:"0.5rem",marginRight:"0.5rem"}})})),r.a.createElement(X.a,{container:!0,spacing:1,alignItems:"flex-end"},r.a.createElement(X.a,{item:!0},r.a.createElement(ce.a,null)),r.a.createElement(X.a,{item:!0},r.a.createElement(S.a,{value:this.state.addworkee,label:"Mitarbeiter hinzuf\xfcgen",onChange:this.handleAddWorkeeChange.bind(this)})),r.a.createElement(X.a,{item:!0},r.a.createElement(ee.a,{"aria-label":"add",onClick:this.handleAddWorkee.bind(this)},r.a.createElement(ue.a,null))))))}}]),a}(r.a.Component),ge=a(98),be=a.n(ge),Ee=a(145),ve=a(719),ye=a(382),Ce=a(146),ke=a.n(Ce),Oe=a(451),we=a.n(Oe),Se=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"cover-loader"},r.a.createElement("div",{className:"loader"},r.a.createElement(x.a,null)))}}]),a}(r.a.Component),je=a(107),Te=a.n(je),xe=function(){function e(){Object(i.a)(this,e)}return Object(o.a)(e,null,[{key:"appendZero",value:function(e){return e<10?"0"+e:""+e}},{key:"isObject",value:function(e){var t=typeof e;return"function"===t||"object"===t&&!!e}},{key:"copyObject",value:function(t){var a={};for(var n in t)t.hasOwnProperty(n)&&(e.isObject(t[n])?a[n]=e.copyObject(t[n]):a[n]=t[n]);return a}}]),e}();xe.dateToString=function(e){var t=xe.appendZero(e.getDate()),a=xe.appendZero(e.getMonth()+1),n=e.getFullYear()+"";return"".concat(t,".").concat(a,".").concat(n)},xe.dateTimeToString=function(e,t,a){a=a||" ";var n=xe.dateToString(e),r=xe.appendZero(e.getHours()),l=xe.appendZero(e.getMinutes()),i=xe.appendZero(e.getSeconds()),o=t?"".concat(r,":").concat(l):"".concat(r,":").concat(l,":").concat(i);return"".concat(n).concat(a).concat(o)};var De=function e(){Object(i.a)(this,e),this.creator="",this.parserVersion="v1",this.version=0,this.template=void 0,this.completionDate=null,this.receiptDate=null,this.label="Neues Protokoll"},Ae=function(){function e(){var t=this;Object(i.a)(this,e),this.entries=[],this.metadata=new De,this.id=-1,this.archived=!1,this.labels=[],this.isValid=function(){var e=!0;return t.entries.map((function(t){return t.isValid()||(e=!1),t})),e}}return Object(o.a)(e,[{key:"toJSON",value:function(){return{entries:this.entries,metadata:this.metadata}}}]),e}(),Pe=function(){function e(){var t=this;Object(i.a)(this,e),this.label="",this.type=null,this._isValid=!0,this.isValid=function(){return t._isValid}}return Object(o.a)(e,[{key:"setValid",value:function(e){this._isValid=e}},{key:"setType",value:function(e){this.type=e}}]),e}(),Ne=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).zeilen=[],e.config=new ze,e.setType("table"),e}return Object(o.a)(a,[{key:"toJSON",value:function(){return{label:this.label,type:this.type,zeilen:this.zeilen,config:this.config}}}]),a}(Pe),Ve=function e(){Object(i.a)(this,e),this.header=void 0,this.spalten=[new Fe]},Fe=function e(){Object(i.a)(this,e),this.zeilen=void 0,this.content=void 0},ze=function e(){Object(i.a)(this,e)},Me=a(86),Le=a(152),Ie=a(77),_e=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(){var e,n,r;return Object(i.a)(this,a),(r=t.call(this)).value=null,r.config=new We,r.validate=function(){return Object(Le.a)((e=Object(Me.a)(r),Object(Ie.a)(a.prototype)),"setValid",e).call(e,r.checkValid()),Object(Le.a)((n=Object(Me.a)(r),Object(Ie.a)(a.prototype)),"setType",n).call(n,"number"),r.isValid()},r.checkValid=function(){return null!==r.value&&(null===r.config.maxValue&&null===r.config.minValue||!(null!==r.config.minValue&&r.value<r.config.minValue)&&!(null!==r.config.maxValue&&r.value>r.config.maxValue))},r.setType("number"),r}return Object(o.a)(a,[{key:"toJSON",value:function(){return{label:this.label,type:this.type,value:this.value,config:this.config}}}]),a}(Pe),We=function e(){Object(i.a)(this,e),this.maxValue=null,this.minValue=null},Re=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(){var e,n,r;return Object(i.a)(this,a),(r=t.call(this)).choices=[],r.possibleChoices=[],r.config=new Be,r.validate=function(){return Object(Le.a)((e=Object(Me.a)(r),Object(Ie.a)(a.prototype)),"setValid",e).call(e,r.checkValid()),Object(Le.a)((n=Object(Me.a)(r),Object(Ie.a)(a.prototype)),"setType",n).call(n,"select"),r.isValid()},r.checkValid=function(){var e=!0;return r.choices.map((function(t){return-1===r.possibleChoices.indexOf(t)&&(e=!1),t})),!!e&&(-1===r.config.maxChoices&&-1===r.config.minChoices||!(-1!==r.config.maxChoices&&r.choices.length>r.config.maxChoices)&&!(-1!==r.config.minChoices&&r.choices.length<r.config.minChoices))},r.setType("select"),r}return Object(o.a)(a,[{key:"toJSON",value:function(){return{label:this.label,type:this.type,choices:this.choices,possibleChoices:this.possibleChoices,config:this.config}}}]),a}(Pe),Be=function e(){Object(i.a)(this,e),this.maxChoices=-1,this.minChoices=-1},Ue=function e(t){var a=this;Object(i.a)(this,e),this._json={},this.parse=function(){var e=[],t=a._json,n=new Ae;(t=t.protocol)||e.push("The root element of a protocol object must be 'protocol'");try{if((isNaN(Date.parse(t.metadata.completionDate))||void 0===(n.metadata.completionDate=new Date(Date.parse(t.metadata.completionDate))))&&null!==t.metadata.completionDate)throw""}catch(r){e.push("Missing field 'completionDate' in protocol.metadata, or wrong type. Type must be DATE.")}try{if(void 0===(n.metadata.creator=t.metadata.creator))throw""}catch(r){e.push("Missing field 'creator' in protocol.metadata")}try{if(void 0===(n.metadata.parserVersion=t.metadata.parserVersion))throw"";"v1"!==t.metadata.parserVersion&&e.push("WARNING: The protocol seems to be using another parser version: "+t.metadata.parserVersion)}catch(r){e.push("Missing field 'parserVersion' in protocol.metadata")}try{if((isNaN(Date.parse(t.metadata.receiptDate))||void 0===(n.metadata.receiptDate=new Date(Date.parse(t.metadata.receiptDate))))&&null!==t.metadata.receiptDate)throw""}catch(r){e.push("Missing field 'receiptDate' in protocol.metadata, or wrong type. Type must be DATE.")}try{if(isNaN(n.metadata.version=t.metadata.version))throw""}catch(r){e.push("Missing field 'version' in protocol.metadata")}try{if(!(n.metadata.label=t.metadata.label))throw""}catch(r){e.push("Missing field 'label' in protocol.metadata")}try{t.entries.map((function(t,a){if("number"===t.type){var r=new _e;r.label=t.label,r.type=t.type,r.value=t.value,r.config={maxValue:t.config.maxValue,minValue:t.config.minValue},r.validate(),n.entries.push(r)}else if("select"===t.type){var l=new Re;l.label=t.label,l.type=t.type,l.choices=t.choices,l.possibleChoices=t.possibleChoices,l.config={maxChoices:t.config.maxChoices,minChoices:t.config.minChoices},l.validate(),n.entries.push(l)}else if("table"===t.type){var i=new Ne;i.label=t.label,i.type=t.type,i.zeilen=t.zeilen,n.entries.push(i)}else e.push("wrong content type in protocol.entries[".concat(a,"]"))}))}catch(r){e.push("Missing or incorrect field 'protocol.entries' or its content.")}return e.length>0?new Ke(e):n},this._json=t},Ke=function e(t){Object(i.a)(this,e),this.messages=[],this.messages=t},Ge=function e(){var t=this;Object(i.a)(this,e),this.protocol=new Ae,this.createdAt=void 0,this.id=void 0,this.toJSON=function(){var e={};return e.protocol=t.protocol,t.createdAt&&(e.createdAt=t.createdAt),t.id&&(e.id=t.id),e}};Ge.fromJSON=function(e){var t=new Ue({protocol:e.protocol}).parse();if(t instanceof Ke)return new Ge;var a=new Ge;return a.createdAt=e.createdAt,a.protocol=t,a.id=e.id,a};var Ze=a(712),He=a(716),Je=a(714),qe=a(715),Qe=a(713),Ye=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={open:!1,error:"",name:""},n.handleClickOpen=function(){n.setState({open:!0})},n.handleClose=function(){n.setState({open:!1,error:"",name:""})},n.handleCreateClicked=function(){if(0!==n.state.name.trim().length){var e=new Ge;e.protocol.metadata.label=n.state.name,e.protocol.metadata.parserVersion="v1",e.createdAt=new Date;var t=V.buildWithSessionKey("/protocols/templates","POST",{},e.toJSON());N()(t).then((function(t){e.id=t.data.id,p.user.protocols.templates.push(e),n.handleClose(),c.instance.emit("updateTemplatesView")})).catch((function(e){n.setState({error:"Protokolltemplate konnte nicht erstellt werden: "+V.extractErrorText(e)})})).finally((function(){}))}else n.setState({error:"Bitte gib eine Bezeichnung f\xfcr das Protokoll ein."})},n.handleNameChange=function(e){n.setState({name:e.target.value})},c.instance.on("openNewTemplateForm",(function(){n.handleClickOpen()})),n}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement(Ze.a,{open:this.state.open,onClose:this.handleClose.bind(this),"aria-labelledby":"form-dialog-title"},r.a.createElement(Qe.a,{id:"form-dialog-title"},"Neues Template erstellen"),r.a.createElement(Je.a,null,this.state.error.trim().length>0&&r.a.createElement(A.a,{severity:"warning"},this.state.error),r.a.createElement(qe.a,null,"Gib bitte einen Namen ein, der dieses Protokoll-Template am besten beschreibt."),r.a.createElement(S.a,{autoFocus:!0,margin:"dense",id:"name",label:"Protokollname",type:"text",fullWidth:!0,value:this.state.name,onChange:this.handleNameChange.bind(this)})),r.a.createElement(He.a,null,r.a.createElement(T.a,{onClick:this.handleClose.bind(this),color:"primary"},"Abbrechen"),r.a.createElement(T.a,{onClick:this.handleCreateClicked.bind(this),color:"primary"},"Erstellen")))}}]),a}(r.a.Component),$e=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={error:"",show:!1,template:new Ge},n.handleClose=function(){n.setState({show:!1,error:""})},n.handleShow=function(){n.setState({show:!0})},n.handleDeleteConfirmed=function(){var e=V.buildWithSessionKey("/protocols/templates/".concat(n.state.template.id),"DELETE");N()(e).then((function(e){p.user.protocols.templates.splice(p.user.protocols.templates.indexOf(n.state.template),1),n.handleClose(),c.instance.emit("updateTemplatesView")})).catch((function(e){n.setState({error:"Template konnte nicht gel\xf6scht werden: ".concat(e.response.data)})}))},c.instance.on("showTemplateDeleteDialog",(function(e){n.setState({template:p.user.protocols.templates[e],show:!0})})),n}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement(Ze.a,{open:this.state.show,onClose:this.handleClose.bind(this),"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(Qe.a,{id:"alert-dialog-title"},"Sind Sie sicher?"),r.a.createElement(Je.a,null,this.state.error.trim().length>0&&r.a.createElement(A.a,{severity:"warning"},this.state.error),r.a.createElement(qe.a,{id:"alert-dialog-description"},'Das Protokoll-Template "',this.state.template.protocol.metadata.label,'" wird endg\xfcltig gel\xf6scht. Die mit diesem Template aufgenommenen Protokolle sind davon unber\xfchrt.')),r.a.createElement(He.a,null,r.a.createElement(T.a,{onClick:this.handleClose.bind(this),color:"primary"},"Abbrechen"),r.a.createElement(T.a,{onClick:this.handleDeleteConfirmed.bind(this),color:"primary",autoFocus:!0},"L\xf6schen")))}}]),a}(r.a.Component),Xe=a(717),et=a(73),tt=a(682),at=a(387),nt=a(718),rt=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{style:this.props.left?{position:"absolute",right:"13rem",bottom:"0",height:"auto",width:"auto"}:{position:"absolute",right:"0",bottom:"0",height:"auto",width:"auto"}},r.a.createElement(Xe.a,{timeout:p.config.fadeInDuration,in:!0,style:{transitionDelay:"".concat(p.config.fadeInDuration,"ms")},unmountOnExit:!0},r.a.createElement(nt.a,{variant:"extended",color:this.props.left?"secondary":"primary","aria-label":"add",className:"action-button-bottom-right",onClick:this.props.onclick&&this.props.onclick},this.props.children)))}}]),a}(r.a.Component),lt=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={open:!0,error:"",loading:!1},e.backup=JSON.parse(JSON.stringify(e.props.entry)),e.handleClose=function(){c.instance.emit("updateEditTemplateView")},e.handleCancel=function(){e.props.entry.value=e.backup.value,e.props.entry.config=e.backup.config,e.props.entry.label=e.backup.label,e.handleClose()},e.handleLabelChange=function(t){e.props.entry.label=t.target.value,e.forceUpdate()},e.stopLoading=function(){e.setState({loading:!1})},e.startLoading=function(){e.setState({loading:!0})},e.handleConfigMinValueChange=function(t){e.props.entry.config.minValue=""===t.target.value?null:Number(t.target.value),e.forceUpdate()},e.handleConfigMaxValueChange=function(t){e.props.entry.config.maxValue=Number(t.target.value)||null,e.forceUpdate()},e.handleSaveClicked=function(){if(0!==e.props.entry.label.trim().length)if(null!==e.props.entry.config.minValue&&null!==e.props.entry.config.maxValue&&e.props.entry.config.minValue>e.props.entry.config.maxValue)e.setState({error:"Der kleinste Wert muss kleiner oder gleich dem gr\xf6\xdften Wert sein."});else{var t=e.props.template.protocol.entries.indexOf(e.props.entry);-1===t&&e.props.template.protocol.entries.push(e.props.entry),console.log(t);var a={id:e.props.template.id,protocol:e.props.template.protocol};e.startLoading();var n=V.buildWithSessionKey("/protocols/templates","POST",{},a);N()(n).then((function(t){e.props.template.id=t.data.id,e.stopLoading(),e.handleClose()})).catch((function(t){e.setState({error:"Template konnte nicht gespeichert werden: "+V.extractErrorText(t),loading:!1})}))}else e.setState({error:"Die Bezeichnung/Frage darf nicht leer sein."})},e}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement(Ze.a,{open:this.state.open,onClose:this.handleCancel.bind(this),"aria-labelledby":"form-dialog-title"},r.a.createElement(Qe.a,{id:"form-dialog-title"},"Zahlenwertabfrage"),r.a.createElement(Je.a,null,this.state.error.trim().length>0&&r.a.createElement(A.a,{severity:"warning"},this.state.error),r.a.createElement(S.a,{autoFocus:!0,margin:"dense",label:"Bezeichnung/Frage",type:"text",fullWidth:!0,value:this.props.entry.label,onChange:this.handleLabelChange.bind(this)}),r.a.createElement("hr",{color:"white",style:{marginTop:"3rem"}}),r.a.createElement(ye.a,{fontSize:"inherit"},"settings")," Einstellungen",r.a.createElement("div",{style:{paddingLeft:"1rem"}},r.a.createElement(S.a,{margin:"dense",label:"Kleinster Wert",type:"number",fullWidth:!0,value:null!==this.props.entry.config.minValue?this.props.entry.config.minValue:"",onChange:this.handleConfigMinValueChange.bind(this)}),r.a.createElement(S.a,{margin:"dense",label:"Gr\xf6\xdfter Wert",type:"number",fullWidth:!0,value:null!==this.props.entry.config.maxValue?this.props.entry.config.maxValue:"",onChange:this.handleConfigMaxValueChange.bind(this)}))),r.a.createElement(He.a,null,r.a.createElement(T.a,{onClick:this.handleCancel.bind(this),color:"primary"},"Abbrechen"),r.a.createElement(D,{loading:this.state.loading,onClick:this.handleSaveClicked.bind(this)},"Speichern")))}}]),a}(r.a.Component),it=a(106),ot=a.n(it),ct=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).styles={header:{width:"100%"},chip:{borderRadius:"0.5rem",marginLeft:"0.5rem"},value:{}},e}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:this.styles.header},this.props.entry.label," ",r.a.createElement($.a,{label:"Zahl",size:"small",style:this.styles.chip}),null!==this.props.entry.config.minValue&&r.a.createElement($.a,{label:r.a.createElement(r.a.Fragment,null,"\u2265 ",this.props.entry.config.minValue),size:"small",style:this.styles.chip,variant:"outlined"}),null!==this.props.entry.config.maxValue&&r.a.createElement($.a,{label:r.a.createElement(r.a.Fragment,null,"\u2264 ",this.props.entry.config.maxValue),size:"small",style:this.styles.chip,variant:"outlined"}),!this.props.noChecks&&!this.props.entry.validate()&&r.a.createElement($.a,{avatar:r.a.createElement(ot.a,{style:{backgroundColor:"inherit",color:"inherit"}}),label:"Grenzen nicht eingehalten",size:"small",color:"secondary",style:{float:"right"},variant:"outlined"}),!this.props.noValue&&r.a.createElement(r.a.Fragment,null,r.a.createElement("hr",null),r.a.createElement("div",{style:this.styles.value},"= ",this.props.entry.value))))}}]),a}(r.a.Component),st=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).styles={header:{width:"100%"},chip:{borderRadius:"0.5rem",marginLeft:"0.5rem"},value:{}},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:this.styles.header},this.props.entry.label," ",r.a.createElement($.a,{label:"Auswahl",size:"small",style:this.styles.chip}),null!==this.props.entry.config.minChoices&&r.a.createElement($.a,{label:r.a.createElement(r.a.Fragment,null,"mindestens ",this.props.entry.config.minChoices),size:"small",style:this.styles.chip,variant:"outlined"}),null!==this.props.entry.config.maxChoices&&r.a.createElement($.a,{label:r.a.createElement(r.a.Fragment,null,"h\xf6chstens ",this.props.entry.config.maxChoices),size:"small",style:this.styles.chip,variant:"outlined"}),!this.props.noChecks&&!this.props.entry.validate()&&r.a.createElement($.a,{avatar:r.a.createElement(ot.a,{style:{backgroundColor:"inherit",color:"inherit"}}),label:"Grenzen nicht eingehalten",size:"small",color:"secondary",style:{float:"right"},variant:"outlined"}),!this.props.noValue&&r.a.createElement("hr",null),this.props.noValue&&r.a.createElement("div",{style:{width:"100%",padding:"0.5rem"}}),r.a.createElement("div",{style:this.styles.value},!this.props.noValue&&r.a.createElement(r.a.Fragment,null,"Auswahl: "),this.props.entry.possibleChoices.map((function(t,a){return r.a.createElement($.a,{key:a,icon:-1===e.props.entry.choices.indexOf(t)?r.a.createElement(ye.a,null,"check_box_outline_blank"):r.a.createElement(ye.a,null,"check_box"),label:t,color:"primary",variant:"outlined",style:{marginBottom:"0.5rem",marginRight:"0.5rem"},disabled:-1===e.props.entry.choices.indexOf(t)&&!e.props.noValue})})))))}}]),a}(r.a.Component),ut=a(443),dt=a.n(ut),ht=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={edit:!!e.props.edit&&e.props.edit,value:e.props.value},e.handleChange=function(t){e.setState({value:t.target.value})},e.handleSave=function(){0!==e.state.value.trim().length||0!==e.props.value.length?0===e.state.value.trim().length?e.setState({edit:!1,value:e.props.value}):(e.setState({edit:!1}),e.props.onChange(e.state.value.trim())):e.props.onDelete()},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,this.state.edit?r.a.createElement($.a,{icon:this.props.icon,label:r.a.createElement("input",{style:{border:"none",outline:"none"},size:this.state.value.length||1,autoFocus:!0,type:"text",value:this.state.value,onChange:this.handleChange.bind(this),onBlur:this.handleSave.bind(this)}),color:this.props.color,variant:this.props.variant,onDelete:this.handleSave.bind(this),deleteIcon:r.a.createElement(dt.a,null),style:{marginBottom:"0.5rem",marginRight:"0.5rem"}}):r.a.createElement($.a,{icon:this.props.icon,label:this.state.value,color:this.props.color,variant:this.props.variant,onDelete:this.props.onDelete,onClick:function(){e.setState({edit:!0})},style:{marginBottom:"0.5rem",marginRight:"0.5rem",backgroundColor:this.props.backgroundColor}}))}}]),a}(r.a.Component),pt=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={open:!0,error:"",loading:!1},e.backup=JSON.parse(JSON.stringify(e.props.entry)),e.handleClose=function(){c.instance.emit("updateEditTemplateView")},e.handleCancel=function(){e.props.entry.choices=e.backup.choices,e.props.entry.possibleChoices=e.backup.possibleChoices,e.props.entry.config=e.backup.config,e.props.entry.label=e.backup.label,e.handleClose()},e.handleLabelChange=function(t){e.props.entry.label=t.target.value,e.forceUpdate()},e.stopLoading=function(){e.setState({loading:!1})},e.startLoading=function(){e.setState({loading:!0})},e.handleConfigMinValueChange=function(t){e.props.entry.config.minChoices=""===t.target.value?-1:Number(t.target.value),e.forceUpdate()},e.handleConfigMaxValueChange=function(t){e.props.entry.config.maxChoices=Number(t.target.value)||-1,e.forceUpdate()},e.handleDeleteChoice=function(t){var a;-1!==(a=e.props.entry.choices.indexOf(e.props.entry.possibleChoices[t]))&&e.props.entry.choices.splice(a,1),e.props.entry.possibleChoices.splice(t,1),e.forceUpdate()},e.handleChoiceChange=function(t,a){e.props.entry.possibleChoices[t]=a,console.log("Change: "+a),e.forceUpdate()},e.handleSaveClicked=function(){if(0!==e.props.entry.label.trim().length)if(0!==e.props.entry.possibleChoices.length)if(null!==e.props.entry.config.minChoices&&null!==e.props.entry.config.maxChoices&&e.props.entry.config.minChoices>e.props.entry.config.maxChoices)e.setState({error:"Die mindestens geforderte Anzahl an Auswahlen muss kleiner oder gleich der H\xf6chstzahl sein."});else{var t=e.props.template.protocol.entries.indexOf(e.props.entry);-1===t&&e.props.template.protocol.entries.push(e.props.entry),console.log(t);var a={id:e.props.template.id,protocol:e.props.template.protocol};e.startLoading();var n=V.buildWithSessionKey("/protocols/templates","POST",{},a);N()(n).then((function(t){e.props.template.id=t.data.id,e.stopLoading(),e.handleClose()})).catch((function(t){e.setState({error:"Template konnte nicht gespeichert werden: "+V.extractErrorText(t),loading:!1})}))}else e.setState({error:"F\xfcgen Sie mindestens eine Antwortm\xf6glichkeit hinzu."});else e.setState({error:"Die Bezeichnung/Frage darf nicht leer sein."})},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=!1;return r.a.createElement(Ze.a,{open:this.state.open,onClose:this.handleCancel.bind(this),"aria-labelledby":"form-dialog-title"},r.a.createElement(Qe.a,{id:"form-dialog-title"},"Auswahl / Multiple Choice"),r.a.createElement(Je.a,null,this.state.error.trim().length>0&&r.a.createElement(A.a,{severity:"warning"},this.state.error),r.a.createElement(S.a,{autoFocus:!0,margin:"dense",label:"Bezeichnung/Frage",type:"text",fullWidth:!0,value:this.props.entry.label,onChange:this.handleLabelChange.bind(this)}),r.a.createElement("hr",{color:"white",style:{marginTop:"3rem"}}),0===this.props.entry.possibleChoices.length?r.a.createElement(I.a,{color:"textSecondary",variant:"subtitle2"},"F\xfcgen Sie Antwortm\xf6glichkeiten hinzu."):r.a.createElement(I.a,{color:"textSecondary",variant:"subtitle2"},"Klicken Sie auf eine Antwort, um sie zu bearbeiten."),this.props.entry.possibleChoices.map((function(a,n){return 0===a.length&&n===e.props.entry.possibleChoices.length-1&&(t=!0),r.a.createElement(ht,{key:"28e7an-"+n,icon:r.a.createElement(ye.a,null,"check_box_outline_blank"),value:a,color:"primary",variant:"outlined",onChange:function(t){e.handleChoiceChange(n,t)},edit:0===a.length&&n===e.props.entry.possibleChoices.length-1,onDelete:e.handleDeleteChoice.bind(e,n)})})),r.a.createElement(ee.a,{edge:"end","aria-label":"delete",onClick:function(){e.props.entry.possibleChoices.push(""),e.forceUpdate()},disabled:t},r.a.createElement(ye.a,null,"add")),r.a.createElement("hr",{color:"white",style:{marginTop:"3rem"}}),r.a.createElement(ye.a,{fontSize:"inherit"},"settings")," Einstellungen",r.a.createElement("div",{style:{paddingLeft:"1rem"}},r.a.createElement(S.a,{margin:"dense",label:"Mindestanzahl anzukreuzender Antworten",type:"number",fullWidth:!0,value:-1!==this.props.entry.config.minChoices?this.props.entry.config.minChoices:"",onChange:this.handleConfigMinValueChange.bind(this)}),r.a.createElement(S.a,{margin:"dense",label:"H\xf6chstanzahl anzukreuzender Antworten",type:"number",fullWidth:!0,value:-1!==this.props.entry.config.maxChoices?this.props.entry.config.maxChoices:"",onChange:this.handleConfigMaxValueChange.bind(this)}))),r.a.createElement(He.a,null,r.a.createElement(T.a,{onClick:this.handleCancel.bind(this),color:"primary"},"Abbrechen"),r.a.createElement(D,{loading:this.state.loading,onClick:this.handleSaveClicked.bind(this)},"Speichern")))}}]),a}(r.a.Component),mt=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return"Hallo Tabelle!"}}]),a}(r.a.Component),ft=a(383),gt=a(384),bt=a(385),Et=a(386),vt=a(219),yt=a(183),Ct=a.n(yt),kt=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={open:!0,error:"",loading:!1},n.backup=JSON.parse(JSON.stringify(n.props.entry)),n.handleClose=function(){c.instance.emit("updateEditTemplateView")},n.handleCancel=function(){n.props.entry.zeilen=n.backup.zeilen,n.props.entry.config=n.backup.config,n.props.entry.label=n.backup.label,n.handleClose()},n.handleLabelChange=function(e){n.props.entry.label=e.target.value,n.forceUpdate()},n.stopLoading=function(){n.setState({loading:!1})},n.startLoading=function(){n.setState({loading:!0})},n.handleSaveClicked=function(){var e;if(0!==n.props.entry.label.trim().length)if(0!==n.props.entry.zeilen.length&&0!==(null===(e=n.props.entry.zeilen[0].spalten)||void 0===e?void 0:e.length)){var t=n.props.template.protocol.entries.indexOf(n.props.entry);-1===t&&n.props.template.protocol.entries.push(n.props.entry),console.log(t);var a={id:n.props.template.id,protocol:n.props.template.protocol};n.startLoading();var r=V.buildWithSessionKey("/protocols/templates","POST",{},a);N()(r).then((function(e){n.props.template.id=e.data.id,n.stopLoading(),n.handleClose()})).catch((function(e){n.setState({error:"Template konnte nicht gespeichert werden: "+V.extractErrorText(e),loading:!1})}))}else n.setState({error:"F\xfcgen Sie mindestens eine Zeile und eine Spalte hinzu."});else n.setState({error:"Die Bezeichnung/Frage darf nicht leer sein."})},n.buildTableRecursive=function(){return r.a.createElement(ft.a,null,r.a.createElement(gt.a,null,n.props.entry.zeilen.map((function(e,t){return n.buildTableRowRecursive(e,n.props.entry.zeilen,t)}))))},n.buildTableRowRecursive=function(e,t,a){return 0===e.spalten.length?void(t&&(t.splice(a,1),c.instance.emit("updateProtocolEntryEditTableView"))):r.a.createElement(bt.a,{key:Ct()()},r.a.createElement(Et.a,null,r.a.createElement(Ot,{zeile:e,parent:t,index:a})),e.spalten.map((function(t,a){return n.buildTableCellRecursive(t,e,a)})))},n.buildTableCellRecursive=function(e,t,a){return e.zeilen&&0===e.zeilen.length&&(e.zeilen=void 0),r.a.createElement(Et.a,{key:Ct()(),style:{border:"1px solid black"}},e.zeilen&&e.zeilen.length>0&&r.a.createElement(ft.a,null,r.a.createElement(gt.a,null,e.zeilen.map((function(t,a){return n.buildTableRowRecursive(t,e.zeilen,a)})))),e.content&&r.a.createElement(r.a.Fragment,null,e.content instanceof _e&&r.a.createElement(r.a.Fragment,null,"ZAHL"),e.content instanceof Re&&r.a.createElement(r.a.Fragment,null,"SELECT"),r.a.createElement("div",{style:{fontWeight:t.header?"bold":"inherit"}},e.content),r.a.createElement(wt,{spalte:e,parent:t,index:a,edit:!0})),!e.content&&!e.zeilen&&r.a.createElement(r.a.Fragment,null,r.a.createElement(wt,{spalte:e,parent:t,index:a})))},c.instance.on("updateProtocolEntryEditTableView",(function(){n.forceUpdate()})),n}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return console.log(this.props.entry),r.a.createElement(Ze.a,{fullWidth:!0,open:this.state.open,onClose:this.handleCancel.bind(this),"aria-labelledby":"form-dialog-title"},r.a.createElement(Qe.a,{id:"form-dialog-title"},"ENDLICH: Tabelle!!!"),r.a.createElement(Je.a,null,this.state.error.trim().length>0&&r.a.createElement(A.a,{severity:"warning"},this.state.error),r.a.createElement(S.a,{autoFocus:!0,margin:"dense",label:"Bezeichnung/Frage",type:"text",fullWidth:!0,value:this.props.entry.label,onChange:this.handleLabelChange.bind(this)}),r.a.createElement("hr",{color:"white",style:{marginTop:"3rem"}}),0===this.props.entry.zeilen.length&&r.a.createElement(I.a,{color:"textSecondary",variant:"subtitle2"},"F\xfcgen Sie eine Zeile hinzu."),this.buildTableRecursive(),r.a.createElement(T.a,{variant:"outlined",onClick:function(){e.props.entry.zeilen.push(new Ve),e.forceUpdate()}},r.a.createElement(ye.a,null,"add"),"Zeile"),r.a.createElement("hr",{color:"white",style:{marginTop:"3rem"}}),r.a.createElement(ye.a,{fontSize:"inherit"},"settings")," Einstellungen",r.a.createElement("div",{style:{paddingLeft:"1rem"}},"TODO")),r.a.createElement(He.a,null,r.a.createElement(T.a,{onClick:this.handleCancel.bind(this),color:"primary"},"Abbrechen"),r.a.createElement(D,{loading:this.state.loading,onClick:this.handleSaveClicked.bind(this)},"Speichern")))}}]),a}(r.a.Component),Ot=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={anchor:null},e.handleOpen=function(t){e.setState({anchor:t.currentTarget})},e.handleClose=function(){e.setState({anchor:null})},e.handleAddSpalte=function(){e.props.zeile.spalten.push(new Fe),c.instance.emit("updateProtocolEntryEditTableView")},e.handleDeleteZeile=function(){var t;null===(t=e.props.parent)||void 0===t||t.splice(e.props.index,1),c.instance.emit("updateProtocolEntryEditTableView")},e.handleAddZeileTop=function(){var t;null===(t=e.props.parent)||void 0===t||t.splice(e.props.index,0,new Ve),c.instance.emit("updateProtocolEntryEditTableView")},e.handleAddZeileBottom=function(){var t;null===(t=e.props.parent)||void 0===t||t.splice(e.props.index+1,0,new Ve),c.instance.emit("updateProtocolEntryEditTableView")},e.handleMarkAsHeader=function(){e.props.zeile.header=!0,c.instance.emit("updateProtocolEntryEditTableView")},e}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(ee.a,{edge:"end","aria-label":"delete",onClick:this.handleOpen.bind(this)},r.a.createElement(ye.a,null,"menu")),r.a.createElement(vt.a,{anchorEl:this.state.anchor,keepMounted:!0,open:Boolean(this.state.anchor),onClose:this.handleClose.bind(this)},r.a.createElement(at.a,{onClick:this.handleAddZeileTop.bind(this)},"Neue Zeile oberhalb"),r.a.createElement(at.a,{onClick:this.handleAddZeileBottom.bind(this)},"Neue Zeile unterhalb"),r.a.createElement(at.a,{onClick:this.handleAddSpalte.bind(this)},"Neue Spalte"),r.a.createElement(at.a,{onClick:this.handleMarkAsHeader.bind(this)},"Zeile als Header markieren"),r.a.createElement(at.a,{onClick:this.handleDeleteZeile.bind(this)},"Zeile L\xf6schen")))}}]),a}(r.a.Component),wt=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={anchor:null},e.handleOpen=function(t){e.setState({anchor:t.currentTarget})},e.handleClose=function(){e.setState({anchor:null})},e.handleAddZeile=function(){e.props.spalte.content=void 0,e.props.spalte.zeilen||(e.props.spalte.zeilen=[new Ve,new Ve]),c.instance.emit("updateProtocolEntryEditTableView")},e.handleAddSpalte=function(){e.props.spalte.content=void 0;var t=new Ve;t.spalten.push(new Fe),e.props.spalte.zeilen||(e.props.spalte.zeilen=[t]),c.instance.emit("updateProtocolEntryEditTableView")},e.handleDeleteSpalte=function(){var t,a;null===(t=e.props.parent)||void 0===t||t.spalten.splice(e.props.index,1),0===(null===(a=e.props.parent)||void 0===a?void 0:a.spalten.length)&&(e.props.parent.spalten=[]),c.instance.emit("updateProtocolEntryEditTableView")},e.handleSetNumberEntry=function(){e.props.spalte.content=new _e,c.instance.emit("updateProtocolEntryEditTableView")},e.handleSetSelectEntry=function(){e.props.spalte.content=new Re,c.instance.emit("updateProtocolEntryEditTableView")},e.handleSetValue=function(t){e.props.spalte.content=t,c.instance.emit("updateProtocolEntryEditTableView")},e.handleDeleteValue=function(){e.props.spalte.content=void 0,c.instance.emit("updateProtocolEntryEditTableView")},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ee.a,{edge:"end","aria-label":"delete",onClick:this.handleOpen.bind(this)},r.a.createElement(ye.a,null,this.props.edit?"edit":"add")),r.a.createElement(vt.a,{anchorEl:this.state.anchor,keepMounted:!0,open:Boolean(this.state.anchor),onClose:this.handleClose.bind(this)},r.a.createElement(at.a,{onClick:this.handleAddZeile.bind(this)},"Zelle in zwei Zeilen teilen"),r.a.createElement(at.a,{onClick:this.handleAddSpalte.bind(this)},"Zelle in zwei Spalten teilen"),r.a.createElement(at.a,{onClick:this.handleDeleteSpalte.bind(this)},"Zelle l\xf6schen"),r.a.createElement(at.a,{onClick:this.handleSetNumberEntry.bind(this)},"Zahlenwertabfrage"),r.a.createElement(at.a,{onClick:this.handleSetSelectEntry.bind(this)},"Auswahl"),r.a.createElement(at.a,null,"Text eingeben:",r.a.createElement(ht,{icon:r.a.createElement(ye.a,null,"text_fields"),value:"Titel",color:"primary",variant:"outlined",onChange:function(t){e.handleSetValue(t)},onDelete:this.handleDeleteValue.bind(this)}))))}}]),a}(r.a.Component),St=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={drawerOpen:!1,editEntry:void 0,loading:!1},n.template=new Ge,n.hideDrawer=function(){n.setState({drawerOpen:!1})},n.showDrawer=function(){n.setState({drawerOpen:!0})},n.handleAddField=function(e){"number"===e&&n.setState({editEntry:new _e}),"select"===e&&n.setState({editEntry:new Re}),"table"===e&&n.setState({editEntry:new Ne}),n.hideDrawer()},n.handleEditField=function(e){n.setState({editEntry:e})},n.handleDeleteEntry=function(e){var t=JSON.parse(JSON.stringify(n.template));t.protocol.entries.splice(e,1);var a=V.buildWithSessionKey("/protocols/templates","POST",{},t);n.setState({loading:!0}),N()(a).then((function(){n.template.protocol.entries.splice(e,1)})).catch((function(e){})).finally((function(){n.setState({loading:!1})}))},c.instance.on("updateEditTemplateView",(function(){n.setState({editEntry:void 0})})),n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.setState({editEntry:this.template.protocol.entries[0]})}},{key:"render",value:function(){var e=this;return this.template=p.user.protocols.templates.find((function(t){return t.id===e.props.id})),console.log(this.template),r.a.createElement(r.a.Fragment,null,void 0!==this.state.editEntry&&r.a.createElement(r.a.Fragment,null,this.state.editEntry instanceof _e&&r.a.createElement(lt,{entry:this.state.editEntry,template:this.template}),this.state.editEntry instanceof Re&&r.a.createElement(pt,{entry:this.state.editEntry,template:this.template}),this.state.editEntry instanceof Ne&&r.a.createElement(kt,{entry:this.state.editEntry,template:this.template})),r.a.createElement(rt,{onclick:this.showDrawer.bind(this)},r.a.createElement(ke.a,{style:{marginRight:"1rem"}}),"Element einf\xfcgen"),r.a.createElement(Xe.a,{timeout:p.config.fadeInDuration,in:!0,style:{transitionDelay:"".concat(p.config.fadeInDuration,"ms")},unmountOnExit:!0},r.a.createElement(C.a,{className:"margin-top padding"},r.a.createElement("h6",{className:"MuiTypography-root MuiTypography-h6"},r.a.createElement(ee.a,{"aria-label":"edit-template",onClick:function(){c.instance.emit("closeTemplateEditView")},onFocus:function(e){return e.stopPropagation()},color:"secondary"},r.a.createElement(ye.a,{style:{color:"black"}},"arrow_back_ios")),"Protokollvorlage bearbeiten:"," ",this.template.protocol.metadata.label),r.a.createElement(J.a,null,this.state.loading&&r.a.createElement(Se,null),this.template&&0===this.template.protocol.entries.length&&r.a.createElement(I.a,{color:"textSecondary",variant:"subtitle2"},"F\xfcgen Sie ein Element hinzu, indem Sie unten rechts auf + ELEMENT HINZUF\xdcGEN klicken."),this.template&&this.template.protocol.entries.length>0&&r.a.createElement(I.a,{color:"textSecondary",variant:"subtitle2"},"Klicken Sie auf ein Element, um es zu bearbeiten."),this.template&&this.template.protocol.entries.map((function(t,a){return r.a.createElement(q.a,{button:!0,onClick:e.handleEditField.bind(e,t),key:a},r.a.createElement(Q.a,null,r.a.createElement(ye.a,null,t instanceof _e&&r.a.createElement(r.a.Fragment,null,"looks_3"),t instanceof Re&&r.a.createElement(r.a.Fragment,null,"check_box"),t instanceof Ne&&r.a.createElement(r.a.Fragment,null,"table_chart"))),r.a.createElement(Y.a,null,t instanceof _e&&r.a.createElement(ct,{entry:t,noChecks:!0,noValue:!0}),t instanceof Re&&r.a.createElement(st,{entry:t,noChecks:!0,noValue:!0}),t instanceof Ne&&r.a.createElement(mt,{entry:t})),r.a.createElement(ve.a,null,r.a.createElement(ee.a,{edge:"end","aria-label":"delete",onClick:e.handleDeleteEntry.bind(e,a)},r.a.createElement(ye.a,null,"delete"))))}))))),r.a.createElement(et.a,{anchor:"right",open:this.state.drawerOpen,onClose:this.hideDrawer.bind(this)},r.a.createElement(tt.a,null,r.a.createElement(at.a,{onClick:this.handleAddField.bind(this,"number")},r.a.createElement(Q.a,null,r.a.createElement(ye.a,null,"looks_3")),r.a.createElement(I.a,{variant:"inherit"},"Zahlenwertabfrage")),r.a.createElement(at.a,{onClick:this.handleAddField.bind(this,"select")},r.a.createElement(Q.a,null,r.a.createElement(ye.a,null,"check_box")),r.a.createElement(I.a,{variant:"inherit"},"Auswahl")),r.a.createElement(at.a,{onClick:this.handleAddField.bind(this,"table")},r.a.createElement(Q.a,null,r.a.createElement(ye.a,null,"table_chart")),r.a.createElement(I.a,{variant:"inherit",noWrap:!0},"Tabelle")))))}}]),a}(r.a.Component),jt=a(680),Tt=a(413),xt=a(414),Dt=function e(){Object(i.a)(this,e),this.id=0,this.name="",this.details="",this.color="gray"},At=a(457),Pt=a(449),Nt=a.n(Pt),Vt=a(448),Ft=a.n(Vt),zt=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={anchorEl:null},e.handlePopoverClose=function(){e.setState({anchorEl:null})},e.handlePopoverOpen=function(t){e.setState({anchorEl:t.currentTarget})},e.id=Ct()(),e}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props.label;return r.a.createElement(r.a.Fragment,null,r.a.createElement($.a,{icon:r.a.createElement(Ft.a,null),label:e.name,color:"secondary",variant:"default",style:{marginBottom:"0.5rem",marginLeft:"0.5rem",backgroundColor:e.color},"aria-owns":Boolean(this.state.anchorEl)?this.id:void 0,"aria-haspopup":"true",onMouseEnter:this.handlePopoverOpen.bind(this),onMouseLeave:this.handlePopoverClose.bind(this)}),r.a.createElement(jt.a,{id:this.id,open:Boolean(this.state.anchorEl),anchorEl:this.state.anchorEl,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},onClose:this.handlePopoverClose.bind(this),disableRestoreFocus:!0},r.a.createElement(I.a,{variant:"subtitle1"},"Details"),r.a.createElement(I.a,{variant:"subtitle1"},e.details)))}}]),a}(r.a.Component),Mt=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).loadLabelsFromBackend=function(){var e=V.buildWithSessionKey("/labels","GET");N()(e).then((function(e){p.user.protocols.labels=e.data,n.copy=JSON.parse(JSON.stringify(p.user.protocols.labels)),n.forceUpdate()}))},n.state={open:!1,loading:!1,error:"",colorPickerAnchor:null,colorPickerLabel:new Dt},n.copy=[],n.handleClose=function(){n.setState({open:!1,error:"",loading:!1})},n.deleteLabel=function(e){n.copy.splice(e,1),n.forceUpdate()},n.closeColorPicker=function(){n.setState({colorPickerAnchor:null})},n.openColorPicker=function(e,t){n.setState({colorPickerAnchor:t.currentTarget,colorPickerLabel:e})},n.handleColorChange=function(e){n.state.colorPickerLabel.color=e.hex,n.forceUpdate()},n.handleNameChange=function(e,t){e.name=t.target.value,n.forceUpdate()},n.handleDetailsChange=function(e,t){e.details=t.target.value,n.forceUpdate()},n.handleAddClicked=function(){var e=new Dt;e.name="Neues Label",e.details="",e.color="green",n.copy.push(e),n.forceUpdate()},n.handleSaveClicked=function(){n.setState({loading:!0});var e=V.buildWithSessionKey("/labels","POST",{},n.copy);N()(e).then((function(){p.user.protocols.labels=n.copy,n.handleClose()})).catch((function(){n.setState({error:"Beim Speichern ist ein Fehler aufgetreten."})})).finally((function(){n.setState({loading:!1})}))},c.instance.on("openLabelEditor",(function(){n.setState({open:!0,error:"",loading:!1}),n.loadLabelsFromBackend()})),n}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ze.a,{fullWidth:!0,open:this.state.open,onClose:this.handleClose.bind(this),"aria-labelledby":"form-dialog-title"},r.a.createElement(Qe.a,{id:"form-dialog-title"},"Labels bearbeiten"),r.a.createElement(Je.a,null,r.a.createElement(A.a,{variant:"standard",color:"info",icon:r.a.createElement(Nt.a,null)},r.a.createElement(qe.a,null,"Labels dienen der Gruppierung und Sortierung von Protokollen.",r.a.createElement("br",null),"Hinterlegte Details werden angezeigt, wenn man mit der Maus \xfcber das Label f\xe4hrt.")),this.state.error.length>0&&r.a.createElement(A.a,{severity:"error"},this.state.error),r.a.createElement("br",null),r.a.createElement(jt.a,{id:"colorPickerPopover",open:Boolean(this.state.colorPickerAnchor),anchorEl:this.state.colorPickerAnchor,onClose:this.closeColorPicker.bind(this),anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},r.a.createElement(At.a,{color:this.state.colorPickerLabel.color,onChange:this.handleColorChange.bind(this)})),r.a.createElement(ft.a,null,r.a.createElement(Tt.a,null,r.a.createElement(bt.a,null,r.a.createElement(Et.a,{align:"left"},"Vorschau"),r.a.createElement(Et.a,{align:"left"},"Text"),r.a.createElement(Et.a,{align:"right"},"Farbe"),r.a.createElement(Et.a,{align:"right"},"Aktionen"))),r.a.createElement(gt.a,null,this.copy.map((function(t,a){return r.a.createElement(r.a.Fragment,{key:"vdwouk-"+a},r.a.createElement(bt.a,null,r.a.createElement(Et.a,{style:{border:"none"}},r.a.createElement(zt,{label:t})),r.a.createElement(Et.a,null,r.a.createElement(S.a,{value:t.name,onChange:e.handleNameChange.bind(e,t)})),r.a.createElement(Et.a,null,r.a.createElement(xt.a,{title:"Farbe \xe4ndern","aria-label":"change_color"},r.a.createElement(ee.a,{edge:"end","aria-label":"delete",color:"secondary",onClick:e.openColorPicker.bind(e,t)},r.a.createElement("div",{style:{backgroundColor:t.color,borderRadius:"50%",border:"9px solid white",height:"15px",width:"15px"}})))),r.a.createElement(Et.a,null,r.a.createElement(ee.a,{edge:"end","aria-label":"delete",color:"secondary",onClick:e.deleteLabel.bind(e,a)},r.a.createElement(Te.a,null)))),r.a.createElement(bt.a,null,r.a.createElement(Et.a,null),r.a.createElement(Et.a,{colSpan:3},r.a.createElement(S.a,{label:"Details",value:t.details,onChange:e.handleDetailsChange.bind(e,t),fullWidth:!0}))))})))),r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(ee.a,{onClick:this.handleAddClicked.bind(this)},r.a.createElement(ke.a,null)))),r.a.createElement(He.a,null,r.a.createElement(T.a,{onClick:this.handleClose.bind(this),color:"primary",disabled:this.state.loading},"Abbrechen"),r.a.createElement(D,{loading:this.state.loading,onClick:this.handleSaveClicked.bind(this)},"Speichern"))))}}]),a}(r.a.Component),Lt=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={editTemplateId:-1,loading:!0,error:"",showError:!1},n.handleDownloadClicked=function(e,t){if(t){var a=V.buildWithSessionKey("/templatetopdf/".concat(t),"GET");a.responseType="blob",n.setState({loading:!0}),N()(a).then((function(t){var a=window.URL.createObjectURL(new Blob([t.data])),n=document.createElement("a");n.href=a,n.setAttribute("download","".concat(e,".pdf")),document.body.appendChild(n),n.click()})).catch((function(e){})).finally((function(){n.setState({loading:!1})}))}},n.handleNewTemplateClicked=function(){c.instance.emit("openNewTemplateForm")},n.componentDidMount=Object(Ee.a)(be.a.mark((function e(){var t;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=V.buildWithSessionKey("/protocols/templates","GET"),e.next=3,N()(t).then((function(e){p.user.protocols.templates=[],e.data.map((function(e,t){var a=new Ue({protocol:e.protocol}).parse();return a instanceof Ae?(e.protocol=a,p.user.protocols.templates.push(Ge.fromJSON(e)),p.user.protocols.templates[t].createdAt=new Date(Date.parse(e.createdAt))):(console.log(a),n.setState({error:"Ein fehlerhaftes Template konnte nicht geladen werden.",showError:!0})),t})),n.setState({loading:!1})})).catch((function(e){n.setState({error:"Daten konnten nicht abgefragt werden.",showError:!0})}));case 3:case"end":return e.stop()}}),e)}))),n.lbl1=new Dt,c.instance.on("updateTemplatesView",(function(){n.forceUpdate()})).on("closeTemplateEditView",(function(){n.setState({editTemplateId:-1})})),n}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return this.lbl1.name="Testlabel",this.lbl1.details="Labeldetails",this.lbl1.id=1,this.lbl1.color="blue",r.a.createElement(r.a.Fragment,null,r.a.createElement(Ye,null),r.a.createElement($e,null),r.a.createElement(Mt,null),r.a.createElement(H.a,{open:this.state.showError,autoHideDuration:5e3,onClose:function(t,a){"clickaway"!==a&&e.setState({showError:!1})}},r.a.createElement(A.a,{severity:"warning"},this.state.error)),-1!==this.state.editTemplateId?r.a.createElement(St,{id:this.state.editTemplateId}):r.a.createElement(r.a.Fragment,null,r.a.createElement(rt,{onclick:this.handleNewTemplateClicked.bind(this)},r.a.createElement(ke.a,{style:{marginRight:"0.75rem"}}),"Neue Vorlage"),r.a.createElement(rt,{onclick:function(){c.instance.emit("openLabelEditor")},left:!0},r.a.createElement(we.a,{style:{marginRight:"0.75rem"}}),"Labels"),r.a.createElement(me.a,{delay:p.config.fadeInDelay,transitionDuration:p.config.fadeInDuration},r.a.createElement(C.a,{className:"margin-top padding"},this.state.loading&&r.a.createElement(Se,null),r.a.createElement("h6",{className:"MuiTypography-root MuiTypography-h6"},"Protokollvorlagen"),0===p.user.protocols.templates.length&&r.a.createElement(I.a,{color:"textSecondary",variant:"subtitle2"},"F\xfcgen Sie Ihr erstes Tempalte hinzu, indem Sie unten rechts auf ",r.a.createElement("strong",null,"+ NEUE VORLAGE")," klicken."),p.user.protocols.templates.map((function(t,a){var n=t.protocol;return r.a.createElement(J.a,{key:"ptl-"+a,style:{width:"100%",padding:"0",margin:"0"}},r.a.createElement(q.a,{button:!0,onClick:function(){e.setState({editTemplateId:t.id})}},r.a.createElement("div",null,n.metadata.label,r.a.createElement("br",null),r.a.createElement(I.a,{color:"textSecondary",variant:"subtitle2"},t.createdAt&&r.a.createElement(r.a.Fragment,null,"erstellt am"," ",xe.dateToString(t.createdAt)))),r.a.createElement(zt,{label:e.lbl1}),t.protocol.labels.map((function(e,t){return r.a.createElement(zt,{key:"lblchip-"+t,label:e})})),r.a.createElement(ve.a,null,r.a.createElement(ee.a,{"aria-label":"download-pdf",onClick:function(a){a.stopPropagation(),e.handleDownloadClicked(t.protocol.metadata.label,t.id)},onFocus:function(e){return e.stopPropagation()},color:"primary"},r.a.createElement(ye.a,{style:{color:"black"}},"get_app")),r.a.createElement(ee.a,{"aria-label":"delete-template",onClick:function(e){c.instance.emit("showTemplateDeleteDialog",a),e.stopPropagation()},onFocus:function(e){return e.stopPropagation()},color:"secondary"},r.a.createElement(Te.a,null)))))}))))))}}]),a}(r.a.Component),It=a(298),_t=a.n(It),Wt=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={value:"",displayed:""},e.onChange=function(t){var a=t.target.value;a=(a=(a=a.toUpperCase()).split("-").join("")).split(" ").join("");for(var n="",r=0;r<a.length;r++)0!==r&&r%4===0&&(n+="-"),n+=a[r];a.length<=16&&e.props.onChange&&e.props.onChange.call(Object(Me.a)(e),a),a.length<=16&&e.setState({value:a,displayed:n})},e}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,{value:this.state.displayed,onChange:this.onChange.bind(this),label:this.props.label,fullWidth:!0}))}}]),a}(r.a.Component),Rt=function e(){var t=this;Object(i.a)(this,e),this.devicename="",this.devicecode="",this.workee=void 0,this.borrowDate=void 0,this.lastsync=void 0,this.asTableData=function(){var e;return{name:t.devicename,workee:(null===(e=t.workee)||void 0===e?void 0:e.id)||void 0,lastsync:t.lastsync}}},Bt=function e(){var t=this;Object(i.a)(this,e),this.device=new Rt,this.setName=function(e){return t.device.devicename=e,t},this.setCode=function(e){return t.device.devicecode=e,t},this.build=function(){return t.device}},Ut=a(730),Kt=a(668),Gt=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.props.loading?r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,null)):r.a.createElement(r.a.Fragment,null,this.props.device?r.a.createElement(r.a.Fragment,null,r.a.createElement(Kt,{value:this.props.device.devicecode,style:{margin:"0 auto",display:"block"}}),r.a.createElement(A.a,{severity:"info",style:{marginTop:"1rem"}},r.a.createElement(Ut.a,null,"Hinweis"),r.a.createElement("p",null,"Achten Sie darauf, dass Ihre Brille mit dem Internet verbunden ist."),r.a.createElement("p",null,"Wenn Sie den Code zu einem fr\xfcheren Zeitpunkt bereits gescannt haben, k\xf6nnen Sie einfach sofort auf weiter klicken."))):r.a.createElement(A.a,{severity:"warning"},"Es konnte kein Ger\xe4t erstellt werden. Bitte lade die Seite neu.")))}}]),a}(r.a.Component),Zt=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={step:1,deviceLoading:!0},e.componentDidMount=function(){e.setState({deviceLoading:!0});var t=V.buildWithSessionKey("/devices/register","POST");N()(t).then((function(t){e.setState({device:t.data})})).catch((function(e){console.log(e)})).finally((function(){return e.setState({deviceLoading:!1})}))},e.handleOpenStepTwo=function(){e.setState({step:2});var t=V.buildWithSessionKey("/devices/".concat(e.state.device.devicecode),"GET");e.timer=setInterval((function(){N()(t).then((function(t){1===t.data.approved&&e.handleOpenStepThree()})).catch((function(e){console.log(e)}))}),3e3)},e.timer=void 0,e.handleOpenStepThree=function(){e.setState({step:3})},e.handleClose=function(){e.setState({step:1,device:void 0,deviceLoading:!0}),e.timer&&clearInterval(e.timer),e.props.onClose()},e}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ze.a,{open:!0,onClose:this.handleClose.bind(this)},r.a.createElement(Qe.a,null,1===this.state.step&&"Scannen Sie den QR-Code mit Ihrer Datenbrille und klicken Sie auf Weiter.",2===this.state.step&&"Bitte warten Sie, w\xe4hrend sich die Brille verbindet...",3===this.state.step&&"Fertig!"),r.a.createElement(Je.a,null,1===this.state.step&&r.a.createElement(Gt,{device:this.state.device,loading:this.state.deviceLoading}),2===this.state.step&&r.a.createElement("div",{style:{width:"100%"}},r.a.createElement(x.a,{style:{margin:"0 auto",display:"block"}})),3===this.state.step&&r.a.createElement(r.a.Fragment,null)),r.a.createElement(He.a,null,r.a.createElement(T.a,{onClick:this.handleClose.bind(this),color:"primary"},"Abbrechen"),1===this.state.step&&!!this.state.device&&r.a.createElement(T.a,{onClick:this.handleOpenStepTwo.bind(this),color:"primary",variant:"contained"},"Weiter"),3===this.state.step&&r.a.createElement(T.a,{onClick:this.handleClose.bind(this),color:"primary"},"Speichern"))))}}]),a}(r.a.Component),Ht=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).lookup={0:"Nicht ausgegeben"},n.columns=[{title:"Ihre Ger\xe4tekennung",field:"name"},{title:"Ausgegeben an",field:"workee",lookup:n.lookup},{title:"Letzte Synchronisierung",field:"lastsync",type:"datetime"}],p.user.workees.map((function(e){return n.lookup[e.id]=e.name,e})),n}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(me.a,{delay:p.config.fadeInDelay,transitionDuration:p.config.fadeInDuration},r.a.createElement("div",{className:"margin-top"},r.a.createElement(_t.a,{options:{paging:!1,filtering:!1,draggable:!1},localization:{body:{editTooltip:"Bearbeiten",deleteTooltip:"L\xf6schen",emptyDataSourceMessage:"Keine Ger\xe4te registriert.",editRow:{saveTooltip:"Speichern",cancelTooltip:"Abbrechen",deleteText:"M\xf6chtest Du dieses Ger\xe4t wirklich entfernen? Es werden dann keine Daten mehr synchronisiert."}},header:{actions:"Aktionen"},toolbar:{searchPlaceholder:"Ger\xe4tename Suchen"}},title:"Meine Ger\xe4te",columns:this.columns,data:this.props.data,editable:{onRowUpdate:function(t,a){return new Promise((function(n){setTimeout((function(){n(),a&&(p.user.devices[e.props.data.indexOf(a)].workee=p.user.workees.find((function(e){return e.id+""===t.workee+""})),p.user.devices[e.props.data.indexOf(a)].lastsync=t.lastsync,console.log(a),console.log(t),console.log(p.user.devices)),c.instance.emit("updateApp")}),600)}))},onRowDelete:function(t){return new Promise((function(a){setTimeout((function(){a(),p.user.devices.splice(e.props.data.indexOf(t)),c.instance.emit("updateApp")}),600)}))}}})),r.a.createElement(Jt,null))}}]),a}(r.a.Component),Jt=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={helpOpen:!1,deviceCode:"",loading:!1,error:"",showQRCode:!1},e.handleClose=function(){e.setState({helpOpen:!1})},e.handleShow=function(){e.setState({helpOpen:!0})},e.onDeviceCodeChange=function(t){e.setState({deviceCode:t})},e.handleRegisterDevice=function(){16===e.state.deviceCode.length?(e.setState({loading:!0}),p.user.devices.push((new Bt).setName("Brille-"+(p.user.devices.length+1)).setCode(e.state.deviceCode).build()),setTimeout((function(){e.setState({loading:!1}),c.instance.emit("updateApp")}),1e3)):e.setState({error:"Bitte gib den 16-stelligen Ger\xe4tecode ein."})},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,this.state.showQRCode&&r.a.createElement(Zt,{onClose:function(){e.setState({showQRCode:!1})}}),r.a.createElement(C.a,{className:"margin-top padding"},r.a.createElement(H.a,{open:this.state.error.length>0,autoHideDuration:5e3,onClose:function(t,a){"clickaway"!==a&&e.setState({error:""})}},r.a.createElement(A.a,{severity:"warning"},this.state.error)),r.a.createElement("h6",{className:"MuiTypography-root MuiTypography-h6"},"Ger\xe4t verkn\xfcpfen"),r.a.createElement(X.a,{container:!0,spacing:3},r.a.createElement(X.a,{item:!0,lg:6,xs:12},r.a.createElement(Wt,{label:"16-stelliger Ger\xe4tecode",onChange:this.onDeviceCodeChange}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement($.a,{avatar:r.a.createElement(B.a,null,"?"),label:"Wo finde ich den Ger\xe4tecode?",onClick:this.handleShow.bind(this)}),r.a.createElement(T.a,{variant:"contained",color:"primary",style:{float:"right"},onClick:function(){e.setState({showQRCode:!0})}},"QR-Code anzeigen")),r.a.createElement(X.a,{item:!0,lg:6,xs:12},r.a.createElement("div",{style:{float:"right"}},r.a.createElement(x.a,{color:"secondary",style:{marginRight:"1rem",display:this.state.loading?"":"none"}}),r.a.createElement(T.a,{variant:"contained",color:"primary",style:{float:"right"},onClick:this.handleRegisterDevice.bind(this)},"Ger\xe4t registrieren"))))),r.a.createElement(Ze.a,{open:this.state.helpOpen,onClose:this.handleClose.bind(this),"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(Qe.a,{id:"alert-dialog-title"},"Wo finde ich den Ger\xe4tecode?"),r.a.createElement(Je.a,null,r.a.createElement(qe.a,{id:"alert-dialog-description"},"\xd6ffnen Sie die ",p.appName,'-App auf Ihrer Datenbrille. Navigieren Sie im Hauptmenu zum Menupunkt "Ger\xe4tecode anzeigen" oder sagen Sie einfach "Ger\xe4tecode".')),r.a.createElement(He.a,null,r.a.createElement(T.a,{onClick:this.handleClose.bind(this),color:"primary"},"Schlie\xdfen"))))}}]),a}(r.a.Component),qt=a(722),Qt=a(305),Yt=a.n(Qt),$t=a(453),Xt=a.n($t),ea=a(727),ta=a(729),aa=a(421),na=a(434),ra=a(728),la=a(242),ia=a.n(la),oa=a(723),ca=a(726),sa=a(725),ua=a(724),da=a(452),ha=a.n(da),pa=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).archiveProtocol=function(){var t=V.buildWithSessionKey("/protocols/archive/".concat(e.props.protocol.id),"GET");N()(t).then((function(e){c.instance.emit("updateCompletedProtocolsViewAndShowSuccessMessage","Protokoll archiviert.")})).catch((function(e){console.log(e)}))},e}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement(X.a,{container:!0,spacing:3},r.a.createElement(X.a,{item:!0,lg:4,md:12,sm:12,xs:12},r.a.createElement(oa.a,{variant:"outlined"},r.a.createElement(ca.a,{style:{backgroundSize:"4rem",minHeight:"5rem"},image:"/img/protocol.svg",title:"Contemplative Reptile"}),r.a.createElement(sa.a,null,r.a.createElement(I.a,{align:"center",gutterBottom:!0,variant:"h5",component:"h2"},this.props.protocol.metadata.label),r.a.createElement(J.a,{dense:!0},r.a.createElement(q.a,null,r.a.createElement(Q.a,null,r.a.createElement(ie.a,null)),r.a.createElement(Y.a,{primary:this.props.protocol.metadata.creator,secondary:"Mitarbeiter"})),r.a.createElement(q.a,null,r.a.createElement(Q.a,null,r.a.createElement(ha.a,null)),r.a.createElement(Y.a,{primary:null!==this.props.protocol.metadata.completionDate?xe.dateTimeToString(this.props.protocol.metadata.completionDate,!0):"Keine Angabe",secondary:"Aufnahmezeitpunkt"})))),r.a.createElement(ua.a,null,r.a.createElement(T.a,{size:"small",color:"secondary",startIcon:r.a.createElement(Te.a,null)},"L\xf6schen"),!this.props.protocol.archived&&r.a.createElement(T.a,{size:"small",color:"primary",startIcon:r.a.createElement(ue.a,null),onClick:this.archiveProtocol.bind(this)},"Protokoll ablegen")))),r.a.createElement(X.a,{item:!0,lg:!0,md:!0,sm:!0,xs:!0},this.props.protocol.entries.map((function(e,t){return r.a.createElement(C.a,{variant:"outlined",className:"protocol-entry-container",key:"protocol-entry-".concat(t)},e instanceof _e&&r.a.createElement(ct,{entry:e}),e instanceof Re&&r.a.createElement(st,{entry:e}),e instanceof Ne&&r.a.createElement(r.a.Fragment,null))}))))}}]),a}(r.a.Component),ma=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={loading:!0},n.componentDidMount=Object(Ee.a)(be.a.mark((function e(){var t;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p.user.protocols.completed=[],t=V.buildWithSessionKey("/protocols/new","GET"),e.next=4,N()(t).then((function(e){p.user.protocols.completed=[],e.data.forEach((function(e){var t=new Ue({protocol:e.protocol}).parse();t instanceof Ae?(t.id=e.id,t.archived=!1,t.metadata.completionDate=new Date(Date.parse(e.protocol.metadata.completionDate)),t.metadata.receiptDate=new Date(Date.parse(e.protocol.metadata.receiptDate)),p.user.protocols.completed.push(t)):console.log(t)})),c.instance.emit("updateCompletedProtocolsView")})).catch((function(e){console.log(e)}));case 4:case"end":return e.stop()}}),e)}))),c.instance.on("updateCompletedProtocolsViewAndShowSuccessMessage",(function(e){n.componentDidMount()})),n}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,p.user.protocols.completed.map((function(t,a){return r.a.createElement(ea.a,{variant:"outlined",key:"completed-protocol-".concat(a),expanded:e.props.expanded===a,style:{backgroundColor:"rgba(87, 49, 88, 0.1)"}},r.a.createElement(ta.a,{expandIcon:r.a.createElement(ia.a,null),"aria-label":"Expand","aria-controls":"additional-actions".concat(a,"-content"),id:"additional-actions".concat(a,"-header"),onClick:function(){c.instance.emit("handleExpandedChange",a)}},r.a.createElement(J.a,{style:{width:"100%",padding:"0",margin:"0"}},r.a.createElement(q.a,{style:{padding:"0",margin:"0"}},r.a.createElement(aa.a,{"aria-label":"Titel",style:{width:"auto"},onClick:function(e){return e.stopPropagation()},onFocus:function(e){return e.stopPropagation()},control:r.a.createElement(na.a,{checked:-1!==e.props.selected.indexOf(a),onClick:function(){c.instance.emit("handleSelectChange",a)}}),label:r.a.createElement(r.a.Fragment,null,t.metadata.label,null!==t.metadata.completionDate&&r.a.createElement(I.a,{color:"textSecondary",variant:"subtitle2"},xe.dateToString(t.metadata.completionDate)))}),r.a.createElement(ve.a,null,!t.isValid()&&r.a.createElement(r.a.Fragment,null,r.a.createElement($.a,{avatar:r.a.createElement(ot.a,null),label:"Erfordert \xdcberpr\xfcfung"})),r.a.createElement(ee.a,{"aria-label":"download-pdf",onClick:function(e){return e.stopPropagation()},onFocus:function(e){return e.stopPropagation()},color:"secondary"},r.a.createElement(j.a,{icon:"file-pdf"})))))),r.a.createElement(ra.a,null,r.a.createElement(pa,{protocol:t,index:a})))})))}}]),a}(r.a.Component),fa=a(731),ga=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={loading:!0,count:0,page:1},n.entriesPerPage=5,n.loadPage=function(e){var t=V.buildWithSessionKey("/protocols/archived/".concat(e*n.entriesPerPage-n.entriesPerPage,"/").concat(n.entriesPerPage),"GET");N()(t).then((function(t){p.user.protocols.completed=[],t.data.forEach((function(e){var t=new Ue({protocol:e.protocol}).parse();console.log(t),t instanceof Ae?(t.id=e.id,t.archived=!0,t.metadata.completionDate=new Date(Date.parse(e.protocol.metadata.completionDate)),t.metadata.receiptDate=new Date(Date.parse(e.protocol.metadata.receiptDate)),p.user.protocols.completed.push(t)):console.log(t)})),n.setState({page:e})})).catch((function(e){console.log(e)}))},n.componentDidMount=function(){var e=Object(Ee.a)(be.a.mark((function e(t){var a;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p.user.protocols.completed=[],a=V.buildWithSessionKey("/protocols/archived/count","GET"),e.next=4,N()(a).then((function(e){n.setState({count:e.data.count})})).catch((function(e){console.log(e)}));case 4:n.loadPage(void 0!==t&&t>0&&t<=n.calcPageCount()?t:1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleChangePage=function(e,t){n.loadPage(t)},n.calcPageCount=function(){return Math.floor((n.state.count-1)/n.entriesPerPage)+1},c.instance.on("updateCompletedProtocolsViewAndShowSuccessMessage",(function(){n.componentDidMount(n.state.page)})),n}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(r.a.Fragment,null,this.state.count," Ergebnisse."),r.a.createElement("div",{className:"margin-top"},p.user.protocols.completed.map((function(t,a){return r.a.createElement(ea.a,{variant:"outlined",key:"completed-protocol-".concat(a),expanded:e.props.expanded===a,style:{backgroundColor:"rgba(87, 49, 88, 0.1)"}},r.a.createElement(ta.a,{expandIcon:r.a.createElement(ia.a,null),"aria-label":"Expand","aria-controls":"additional-actions".concat(a,"-content"),id:"additional-actions".concat(a,"-header"),onClick:function(){c.instance.emit("handleExpandedChange",a)}},r.a.createElement(J.a,{style:{width:"100%",padding:"0",margin:"0"}},r.a.createElement(q.a,{style:{padding:"0",margin:"0"}},r.a.createElement(aa.a,{"aria-label":"Titel",style:{width:"auto"},onClick:function(e){return e.stopPropagation()},onFocus:function(e){return e.stopPropagation()},control:r.a.createElement(na.a,{checked:-1!==e.props.selected.indexOf(a),onClick:function(){c.instance.emit("handleSelectChange",a)}}),label:r.a.createElement(r.a.Fragment,null,t.metadata.label,null!==t.metadata.completionDate&&r.a.createElement(I.a,{color:"textSecondary",variant:"subtitle2"},xe.dateToString(t.metadata.completionDate)))}),r.a.createElement(ve.a,null,!t.isValid()&&r.a.createElement(r.a.Fragment,null,r.a.createElement($.a,{avatar:r.a.createElement(ot.a,null),label:"Erfordert \xdcberpr\xfcfung"})),r.a.createElement(ee.a,{"aria-label":"download-pdf",onClick:function(e){return e.stopPropagation()},onFocus:function(e){return e.stopPropagation()},color:"secondary"},r.a.createElement(j.a,{icon:"file-pdf"})))))),r.a.createElement(ra.a,null,r.a.createElement(pa,{protocol:t,index:a})))})),r.a.createElement(fa.a,{page:this.state.page,onChange:this.handleChangePage.bind(this),count:this.calcPageCount(),variant:"outlined",color:"secondary",style:{marginTop:"1rem"}})))}}]),a}(r.a.Component),ba=a(454),Ea=a.n(ba),va=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={error:""},e.handleClose=function(){e.setState({error:""}),c.instance.emit("hideDeleteConfirmDialog")},e.handleShow=function(){e.setState({show:!0})},e.handleDeleteConfirmed=function(){var t=V.buildWithSessionKey("/protocols/delete","POST",{},{ids:e.props.ids});N()(t).then((function(t){e.props.ids.map((function(e,t){var a=p.user.protocols.completed.findIndex((function(t){return t.id===e}));-1!==a&&p.user.protocols.completed.splice(a,1)})),e.handleClose(),c.instance.emit("updateCompletedProtocolsViewAndShowSuccessMessage","Protokoll gel\xf6scht.")})).catch((function(t){e.setState({error:"Protokoll konnte nicht gel\xf6scht werden: ".concat(V.extractErrorText(t))})}))},e}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement(Ze.a,{open:!0,onClose:this.handleClose.bind(this),"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(Qe.a,{id:"alert-dialog-title"},"Sind Sie sicher?"),r.a.createElement(Je.a,null,this.state.error.trim().length>0&&r.a.createElement(A.a,{severity:"warning"},this.state.error),r.a.createElement(qe.a,{id:"alert-dialog-description"},this.props.ids.length>1?r.a.createElement(r.a.Fragment,null,"Es werden ",this.props.ids.length," Protokolle "):r.a.createElement(r.a.Fragment,null,"Es wird ",this.props.ids.length," Protokoll "),"endg\xfcltig gel\xf6scht. Sind Sie sicher?")),r.a.createElement(He.a,null,r.a.createElement(T.a,{onClick:this.handleClose.bind(this),color:"primary"},"Abbrechen"),r.a.createElement(T.a,{onClick:this.handleDeleteConfirmed.bind(this),color:"primary",autoFocus:!0},"L\xf6schen")))}}]),a}(r.a.Component),ya=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).getIds=function(){var e=[];return p.user.protocols.completed.forEach((function(t,a){-1!==n.state.selected.indexOf(a)&&e.push(t.id)})),e},n.state={selected:[],expanded:-1,currentTab:0,showDeleteConfirmDialog:!1,successMessage:""},n.handleSelectChange=function(e){-1!==n.state.selected.indexOf(e)?(n.state.selected.splice(n.state.selected.indexOf(e),1),n.setState({selected:n.state.selected})):(n.state.selected.push(e),n.setState({selected:n.state.selected}))},n.handleExpandedChange=function(e){n.state.expanded===e?n.setState({expanded:-1}):n.setState({expanded:e})},c.instance.on("handleExpandedChange",(function(e){n.handleExpandedChange(e)})),c.instance.on("handleSelectChange",(function(e){n.handleSelectChange(e)})).on("updateCompletedProtocolsViewAndShowSuccessMessage",(function(e){n.setState({selected:[],expanded:-1,showDeleteConfirmDialog:!1,successMessage:e})})).on("updateCompletedProtocolsView",(function(e){e&&n.setState({selected:[],expanded:-1,showDeleteConfirmDialog:!1}),n.forceUpdate()})).on("hideDeleteConfirmDialog",(function(){n.setState({showDeleteConfirmDialog:!1})})),n}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,this.state.showDeleteConfirmDialog&&r.a.createElement(va,{ids:this.getIds()}),r.a.createElement(H.a,{open:this.state.successMessage.length>0,autoHideDuration:6e3,onClose:function(){e.setState({successMessage:""})}},r.a.createElement(A.a,{onClose:function(){e.setState({successMessage:""})},severity:"success"},this.state.successMessage)),r.a.createElement(me.a,{delay:p.config.fadeInDelay,transitionDuration:p.config.fadeInDuration},r.a.createElement(qt.a,{position:"relative",color:"default"},r.a.createElement(C.a,{square:!0},r.a.createElement(k.a,{value:this.state.currentTab,onChange:function(t,a){e.setState({currentTab:a,selected:[],expanded:[]})},variant:"fullWidth",indicatorColor:"secondary",textColor:"secondary","aria-label":"icon label tabs example"},r.a.createElement(O.a,{icon:r.a.createElement(Xt.a,null),label:"NEUE PROTOKOLLE"}),r.a.createElement(O.a,{icon:r.a.createElement(Yt.a,null),label:"ARCHIV"})))),r.a.createElement(C.a,{className:"padding margin-top"},r.a.createElement("h6",{className:"MuiTypography-root MuiTypography-h6"},0===this.state.currentTab?r.a.createElement(r.a.Fragment,null,"Neue Protokolle"):r.a.createElement(r.a.Fragment,null,"Abgelegte Protokolle"),r.a.createElement("div",{style:{float:"right"}},r.a.createElement(T.a,{variant:"outlined",color:"secondary",startIcon:r.a.createElement(Te.a,null),disabled:this.state.selected.length<=0,onClick:function(){e.setState({showDeleteConfirmDialog:!0})}},"Auswahl l\xf6schen")," ",0===this.state.currentTab&&r.a.createElement(r.a.Fragment,null,r.a.createElement(T.a,{variant:"outlined",color:"primary",startIcon:r.a.createElement(Yt.a,null),disabled:this.state.selected.length<=0},"Auswahl ablegen")," "),r.a.createElement(T.a,{variant:"outlined",color:"primary",startIcon:r.a.createElement(Ea.a,null),disabled:this.state.selected.length<=0},"Auswahl als .zip herunterladen"))),r.a.createElement("div",{className:"margin-top"},0===this.state.currentTab&&r.a.createElement(ma,{selected:this.state.selected,expanded:this.state.expanded}),1===this.state.currentTab&&r.a.createElement(ga,{selected:this.state.selected,expanded:this.state.expanded})))))}}]),a}(r.a.Component);function Ca(e){var t=e.children,a=e.value,n=e.index,l=Object(L.a)(e,["children","value","index"]);return r.a.createElement(I.a,Object.assign({component:"div",role:"tabpanel",hidden:a!==n,id:"vertical-tabpanel-".concat(n),"aria-labelledby":"vertical-tab-".concat(n)},l),a===n&&r.a.createElement(_.a,{pl:3},t))}function ka(e){return{id:"vertical-tab-".concat(e),"aria-controls":"vertical-tabpanel-".concat(e)}}var Oa=Object(W.a)((function(e){return{tabs:{borderRight:"1px solid ".concat(e.palette.divider),height:"100%"}}}));function wa(){var e=Oa(),t=r.a.useState(1),a=Object(M.a)(t,2),n=a[0],l=a[1];return r.a.createElement("div",{className:"main-background"},r.a.createElement("div",{className:"dashboard-sidebar"},r.a.createElement(C.a,{square:!0},r.a.createElement(k.a,{orientation:"vertical",variant:"scrollable",value:n,indicatorColor:"secondary",textColor:"secondary",onChange:function(e,t){l(t)},"aria-label":"Vertical tabs example",className:e.tabs},r.a.createElement(O.a,Object.assign({icon:r.a.createElement(Z,{name:"Leipziger Verkehrsbetriebe",avatar:"/img/avatar/1.jpg",icon:"cog"}),label:"Account",className:"dashboard-sidebar-tab"},ka(0))),r.a.createElement(O.a,Object.assign({icon:r.a.createElement(j.a,{icon:"clipboard-list"}),label:"Protokollvorlagen",className:"dashboard-sidebar-tab"},ka(1))),r.a.createElement(O.a,Object.assign({icon:r.a.createElement(j.a,{icon:"clipboard-check"}),label:"Ausgef\xfcllte Protokolle"},ka(2))),r.a.createElement(O.a,Object.assign({icon:r.a.createElement(j.a,{icon:"glasses"}),label:"Meine Ger\xe4te"},ka(3)))))),r.a.createElement(Ca,{value:n,index:0},r.a.createElement(ja,null,r.a.createElement(fe,null))),r.a.createElement(Ca,{value:n,index:1},r.a.createElement(ja,null,r.a.createElement(Lt,null))),r.a.createElement(Ca,{value:n,index:2},r.a.createElement(ja,null,r.a.createElement(ya,null))),r.a.createElement(Ca,{value:n,index:3},r.a.createElement(ja,null,r.a.createElement(Ht,{data:Sa()}))))}function Sa(){var e=[];return p.user.devices.map((function(t){return e.push(t.asTableData()),t})),e}var ja=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{style:{marginLeft:"15rem",paddingRight:"1rem",overflowY:"auto",height:"100%"}},this.props.children)}}]),a}(r.a.Component),Ta=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(e){var n;return Object(i.a)(this,a),n=t.call(this,e),c.instance.on("updateApp",(function(){n.forceUpdate()})),n}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Pa,null),r.a.createElement(v.a,null,r.a.createElement(y.c,null,r.a.createElement(y.a,{path:"/",exact:!0,component:Da}),r.a.createElement(y.a,{path:"/login",exact:!0,component:z}),r.a.createElement(y.a,{path:"/impressum",exact:!0,component:xa}),r.a.createElement(y.a,{component:Aa}))))}}]),a}(r.a.Component);function xa(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Impressum"))}function Da(){return F.isLoggedIn()?r.a.createElement(wa,null):r.a.createElement(z,null)}function Aa(){return r.a.createElement(r.a.Fragment,null,"Seite konnte nicht gefunden werden.",r.a.createElement("br",null),r.a.createElement(v.b,{to:"/"},"Zur\xfcck"))}var Pa=function(e){Object(b.a)(a,e);var t=Object(E.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={error:!1},e}return Object(o.a)(a,[{key:"render",value:function(){return this.state.error?r.a.createElement(r.a.Fragment,null,r.a.createElement(Ze.a,{fullWidth:!0,open:this.state.error,onClose:function(){},"aria-labelledby":"form-dialog-title"},r.a.createElement(Qe.a,{id:"form-dialog-title"},"Backend error.."),r.a.createElement(Je.a,null,r.a.createElement(qe.a,null)))):null}}]),a}(r.a.Component);function Na(){Object(l.render)(n.createElement(Ta,null),document.getElementById("root")),F.isLoggedIn()&&F.checkSession().then((function(e){})).catch((function(e){"Session probably expired"===e&&c.instance.emit("updateApp")}))}m.b.add(f.a),m.b.add(g.a),V.config().baseURL("https://teambrille.herokuapp.com/web").timeout(6e3),p.config.fadeInDuration=200,p.config.fadeInDelay=100,p.user.devices.push((new Bt).setCode("HIZG-BAFD-W867-BAWG").setName("Brille-1").build()),c.instance.on("changeProperty",(function(e,t){if(e){for(var a=e.split("."),n=p;a.length>1;)n=n[a.shift()];n[a[0]]=t}console.log("path: "+e+" value: "+t),Na()})).on("updateApp",(function(){Na()}));t.default=Na()}},[[473,1,2]]]);
//# sourceMappingURL=main.ab107a18.chunk.js.map